<!DOCTYPE html>
<html>
	<head>
	</head>
	<body>
		<div id="chartContainer" style="height: 370px; width: 100%;"></div>
		<script type="text/javascript" src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
		<script type="text/javascript">
			let accel_x = [];
			let accel_y = [];
			let accel_z = [];
			let chart;
			let updateRate = 1000;
			let dataLength = 64;
			let xStep = Math.PI * 2.0 / (dataLength - 1);
			window.onload = function()
			{
				chart = new CanvasJS.Chart("chartContainer", 
				{		
					title:
					{
						text: "Acceleration",
					},
					axisX: {
						title: "Time,[sec]"
					},
					axisY: {
						title: "Accel,[m/sec^2]",
					},
					data:[
					{
						name: "acceleration_x",
						showInLegend: true,
						type: "line",
						lineThickness: 2,
						markerSize: 0,
						dataPoints: accel_x,
						
					},
					{
						name: "acceleration_y",
						showInLegend: true,
						type: "line",
						lineThickness: 2,
						markerSize: 0,
						dataPoints: accel_y,
						
					},
					{
						name: "acceleration_z",
						showInLegend: true,
						type: "line",
						lineThickness: 2,
						markerSize: 0,
						dataPoints: accel_z,
						
					}
					]
				});
				var xVal = 0.0;
				var yVal = 0.0;
				var onCahrtUpdate = function(count)
				{
					count = count||1;
					for(var j = 0;  j < count; j++)
					{
						yVal = Math.sin(xVal);
						accel_x.push(
						{
						 x: xVal,
						 y: yVal
						});
						
						yVal = Math.sin(xVal + 1);
						accel_y.push(
						{
						 x: xVal,
						 y: yVal
						});
											
						yVal = Math.sin(xVal + 2);
						accel_z.push(
						{
						 x: xVal,
						 y: yVal
						});
						xVal += xStep;
					}
					
					if(accel_z.length > dataLength)
					{
						accel_x.shift();
						accel_y.shift();
						accel_z.shift();
					}
					chart.render();
				}               
				onCahrtUpdate(dataLength);
				setInterval(function(){onCahrtUpdate()}, updateRate);
			}
		</script>
	</body>
</html>